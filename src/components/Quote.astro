---
export interface QuoteProps {
  text: string
  author?: string
  source?: string
  quoteMarkVariant?: 'typographic' | 'heavy' | 'sans-serif'
}

const { text, author, source, quoteMarkVariant = 'typographic' } = Astro.props

// Mapowanie wariant√≥w na znaki Unicode
const quoteMarks = {
  typographic: { left: '"', right: '"' }, // U+201C, U+201D
  heavy: { left: '‚ùù', right: '‚ùû' }, // U+275D, U+275E
  'sans-serif': { left: 'üô∂', right: 'üô∑' }, // U+1F676, U+1F677
} as const

const marks = quoteMarks[quoteMarkVariant as keyof typeof quoteMarks]
---

<blockquote class="quote-container" data-quote-variant={quoteMarkVariant}>
  <div class="quote-content">
    <div
      class="quote-text"
      data-quote-left={marks.left}
      data-quote-right={marks.right}
    >
      {text}
    </div>
    {
      author && (
        <footer class="quote-footer">
          <cite class="quote-author">
            {author}
            {source && <span class="quote-source">, {source}</span>}
          </cite>
        </footer>
      )
    }
  </div>
</blockquote>

<style lang="scss">
  .quote-container {
    position: relative;
    /* Minimal: no background, no borders */
    background: transparent;
    border: none;
    border-radius: 14px;

    /* Center + keep space around on large screens */
    width: 100%;
    max-width: 56rem; /* ~896px */
    margin: 3.5rem auto;
    padding: clamp(2rem, 3vw, 3rem) clamp(1.5rem, 2.5vw, 2.5rem);

    /* On wide screens keep ~10‚Äì15% space on both sides */
    @media (min-width: 1000px) {
      width: 80%;
    }
  }

  .quote-content {
    position: relative;
    z-index: 1;
  }

  .quote-text {
    position: relative;
    font-family: 'Times New Roman', Times, serif;
    font-size: clamp(1.75rem, 2.2vw, 2.6rem);
    line-height: 1.35;
    font-weight: 400;
    color: #ffffff;
    font-style: italic;
    text-align: center;
    margin-bottom: 1.25rem;

    // TODO: Improve quote marks positioning and change font to appropriate one
    // Lewy cudzys≈Çow - w lewym g√≥rnym rogu ramki tekstu, nachodzi ~30-40% od g√≥ry i lewej
    &::before {
      content: attr(data-quote-left);
      font-family: Georgia, serif;
      font-size: clamp(8rem, 12vw, 14rem);
      color: rgba(255, 255, 255, 0.0525);
      position: absolute;
      /* Pozycjonowanie wzglƒôdem ramki .quote-text - lewy g√≥rny r√≥g */
      top: 0;
      left: 0;
      /* ~60-70% poza tekstem, ~30-40% nachodzi na tekst (transform w % szeroko≈õci/wysoko≈õci tekstu) */
      transform: translate(-70%, -25%);
      line-height: 1;
      z-index: -1;
      pointer-events: none;
    }

    // Prawy cudzys≈Çow - w prawym dolnym rogu ramki tekstu, nachodzi ~30-40% od prawej i do≈Çu
    &::after {
      content: attr(data-quote-right);
      font-family: Georgia, serif;
      font-size: clamp(8rem, 12vw, 14rem);
      color: rgba(255, 255, 255, 0.0525);
      position: absolute;
      /* Pozycjonowanie wzglƒôdem ramki .quote-text - prawy dolny r√≥g */
      top: auto;
      bottom: 0;
      right: 0;
      /* ~60-70% poza tekstem, ~30-40% nachodzi na tekst - przesuwa w prawo i w d√≥≈Ç */
      transform: translate(70%, 30%);
      line-height: 1;
      z-index: -1;
      pointer-events: none;
    }
  }

  .quote-footer {
    text-align: center;
    margin-top: 1.5rem;
  }

  .quote-author {
    font-size: 1rem;
    color: rgba(255, 255, 255, 0.7);
    font-style: normal;
    font-weight: 500;

    .quote-source {
      font-weight: 300;
      color: rgba(255, 255, 255, 0.5);
    }
  }

  // Wariant z t≈Çem gradientowym
  .quote-container.gradient {
    background: linear-gradient(
      135deg,
      rgba(59, 130, 246, 0.1) 0%,
      rgba(147, 51, 234, 0.1) 100%
    );
    border-left-color: #3b82f6;
  }

  // Wariant minimalistyczny
  .quote-container.minimal {
    background: transparent;
    border: none;
    padding: 2rem 1rem;

    &::before,
    &::after {
      color: rgba(255, 255, 255, 0.1);
    }
  }

  // Wariant z cieniem
  .quote-container.shadow {
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    background: rgba(0, 0, 0, 0.2);
    backdrop-filter: blur(10px);
  }
</style>
